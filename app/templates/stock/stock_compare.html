{% extends 'base.html' %}
{% block content %}

    <style>
        table {
           border-collapse: collapse;
        }

        table, th, td {
            border: 1px solid black;
        }
    </style>

    {%  if error_msg %}
        <div>
            <b>{{ error_msg }}</b>
        </div>
    {%  endif %}

    <div id="stock_plot" style="width: 600px;height: 200px"></div>

    <script src="https://code.jquery.com/jquery-3.1.1.js"
            integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.time.js"></script>

    <script>
    $(function() {
        options = {
            xaxis: {
                mode: "time",
                timeformat: "%Y-%m-%d"
            }
        };

        close_history = [ {{ close_histories[0] }} ];
        for (i = 0; i < close_history[0].length; i++) {
            close_history[0][i][0] *= 1000;
        }
        $.plot("#stock_plot", close_history, options);
    });
    </script>

{% endblock %}